# Библиотека

Весь импортированный контент `Atsumeru` помещает в библиотеку. Она всегда единственная и глобальная для всего сервера

Разделять контент по группам можно с помощью [Динамических категорий](./library.md#динамические-категории) или путем создания неограниченного количества [Категорий](./library.md#категории) и помещению в них контента

По умолчанию, весь импортированный контент помещается в [Категорию](./library.md#категории) `Несортированные` за исключением случаев, когда в [Метаданных](./metadata.md) указан тип контент

<img style="display: block; margin: 0 auto" src="/assets/media/ru/guides/app-library.png">
<p style="text-align: center; font-size:75%">Интерфейс библиотеки</p>

:::c-tip
Нажав правую кнопку мыши на карточке контента откроется контекстное меню с дополнительными функциями по типу смены [Категории](./library.md#категории) или редактирования [Метаданных](./metadata.md)

<img style="display: block; margin: 0 auto" src="/assets/media/ru/guides/app-library-context-menu.png">
<p style="text-align: center; font-size:75%">Контекстное меню карточки контента</p>
:::

## Динамические категории

`Динамические категории` - это особая функция, которая автоматически группирует контент по категориям на основе [Типов контента](/ru/glossary/content-types.md)

Группировка происходит сразу во время импортирования, если в [Метаданных](./metadata.md) контента указан тип или после редактирования [Метаданных](./metadata.md) с указанием/сменой типа

Данные категории появляются, если в базе данных есть хотя бы одна `Серия` с необходимым типом и автоматически удаляются, если `Серий` нет. Нельзя напрямую управлять категориями (создание/редактирование/удаление), но можно как угодно изменять их порядок

:::c-tip
Переместив контент в [Категорию](./library.md#категории) он больше не будет относится к `Динамической категории` даже при совпадении [Типов контента](/ru/glossary/content-types.md). Таким образом, можно полностью избавиться от ненужной категории
:::

:::c-warning
Существует также *особая* `Динамическая категории` - `Несортированные`. Сюда автоматически помещается весь контент без указанного [Типа контента](/ru/glossary/content-types.md) и [Категории](./library.md#категории)
:::

## Категории

В добавок к (или как альтернатива) [Динамическим категориям](./library.md#динамические-категории) можно создавать свои `Категории` и перемещать туда контент. Нажав <MaterialIcon icon="local_offer"/> на панели [Atsumeru Manager](https://github.com/AtsumeruDev/AtsumeruManager) <img style="position: relative; top: 6px;" width="24" height="24" src="/assets/media/icons/windows.png"> <img style="position: relative; top: 6px;" width="24" height="24" src="/assets/media/icons/penguin.png"> <img style="position: relative; top: 6px;" width="24" height="24" src="/assets/media/icons/apple.png"> откроется `Редактор категорий` в котором можно изменять, удалять и создавать новые категории

<img style="display: block; margin: 0 auto" src="/assets/media/ru/guides/categories-edit.png">
<p style="text-align: center; font-size:75%">Интерфейс редактора категорий</p>

:::c-warning
Название категории должно быть уникальным
:::

Выбрав из контекстного меню контента `Изменить категорию` откроется аналогичное окно, где можно указать в какие категории его поместить

:::c-tip
Контент одновременно может находиться в неограниченном количестве категорий
:::

Если удалить категорию, весь контент будет перемещен в `Несортированные` или [Динамическую категории](./library.md#динамические-категории) на основе [Типа контента](/ru/glossary/content-types.md)

### Изменение порядка категорий

Порядок категорий изменяется путем перетаскивания вкладок категорий на нижней панели приложения

## Метакатегории

Из всех [Метаданных](./metadata.md) всего контента на сервере, `Atsumeru` автоматически создает `Метакатегории`. Это специальный раздел, в котором контент группируется по формуле `<категория>` > `<тег>` > `<списки контента>`, где:
- `<категория>` - одна из предопределенных [Категорий метаданных](/ru/glossary/metadata-categories.md)
- `<тег>` - атомарная единица категории (например, отдельный автор, переводчик, жанр и тд)
- `<списки контента>` - сформированные списки контента, которые в метаданных содержат данный `<тег>` в `<категории>`

Метакатегории работают независимо от пользователя, ими нельзя управлять и напрямую изменять (изменение производится только изменением [Метаданных](./metadata.md) контента). Их нельзя отключить или как-то настроить

:::c-warning
Использовать и/или поддерживать `Метакатегории` необязательно. Разработчик клиента может не реализовывать данный функционал или сделать его опциональным
:::

## Сортировка

`Atsumeru` поддерживает огромное количество [Видов сортировки](/ru/glossary/sort-types.md)

:::c-warning
Сортировка `По последнему чтению` работает немного медленее из-за дополнительных запросов к истории чтения
:::

Сортировку можно использовать как со списками контента по умолчанию, так и комбинировать их с [Фильтрацией и поиском](./library.md#фильтрация-и-поиск)

## Фильтрация и поиск

### Фильтрация

По аналогии с [Метакатегорями](./library.md#метакатегории), из всех [Метаданных](./metadata.md) всего контента на сервере собираются списки `тегов` для всех [Категорий метаданных](/ru/glossary/metadata-categories.md). Данные списки можно использовать для более точной выборки контента

:::c-tip
Практически все [Категорий метаданных](/ru/glossary/metadata-categories.md) поддерживают множественную и/или исключающую фильтрацию
:::

:::c-warning
Качественная реализация интерфейсов фильтрация остается за разработчиком клиента
:::

### Поиск

Сервер поддерживает поиск по ключевым словам по основным полям (названия) и по всем остальным полям [Метаданных](./metadata.md). Например, выполнив поиск по фразе `Honna`, сервер отобразит весь контент, автором которого является `Honna Wakou`

:::c-tip
Для удобства обработки и заполнения [Метаданных](./metadata.md) в категории `Несортированное`, Администраторам также доступен поиск по путям к файлам. Он ничем не отличается от обычного поиска. Достаточно в роли фразы использовать часть пути к необходимым файлам. Например, выполнив поиск по фразе `Rebirth`, сервер отобразит весь контент, в путях которого находится фраза `DC Rebirth`
:::

:::c-danger
Полнотекстовый [Fuzzy-поиск](https://www.wikiwand.com/ru/%D0%9F%D1%80%D0%B8%D0%B1%D0%BB%D0%B8%D0%B6%D0%B5%D0%BD%D0%BD%D0%BE%D0%B5_%D1%81%D0%BE%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D1%81%D1%82%D0%B2%D0%B8%D0%B5_%D1%81%D1%82%D1%80%D0%BE%D0%BA) не поддерживается
:::


## Удаление контента

Контент можно удалить из библиотеки с помощь соответствующего пункта его контекстного меню. Физически файл не удаляется, а *скрывается* сама запись о `Серии` в базе данных. Переимпорт не восстановляет удаленный контент

:::c-tip
Восстановить удаленный контент можно [удалив из импорта директорию](./import.md#удаление-директории), в которой находится данный контент и заново ее импортировав
:::