# Імпорт

Після запуску сервера, його потрібно наповнити своїм контентом. Процес дуже простий і потребуватиме мінімальної участі в ньому

## Керування директоріями імпорту

Вікно управління директоріями можна відкрити натиснувши <MaterialIcon icon="file_open"/> на панелі [Atsumeru Manager](https://github.com/AtsumeruDev/AtsumeruManager) <img style="position: relative; top: 6px;" width="24" height="24" src="/assets/media/icons/windows.png"> <img style="position: relative; top: 6px;" width="24" height="24" src="/assets/media/icons/penguin.png"> і вибравши `Управління директоріями`. У цьому вікні можна переглянути список доданих директорій, [видаляти додані](./import.md#видалення-директоріі) і [додавати нові](./import.md#додавання-новоі-директоріі). Також, доступний запуск вибіркового імпортування для окремих директорій з підказками про те, який саме режим імпортування буде запущено

:::c-tip
Для зручності, додатково під кожною директорією відображається кількість контенту, який з неї імпортовано
:::

<img style="display: block; margin: 0 auto" src="/assets/media/ru/guides/import-dir-list.png">
<p style="text-align: center; font-size:75%">Інтерфейс керування директоріями</p>

## Додавання нової директорії

Щоб додати нову директорію, необхідно у вікні `Управління директоріями` натиснути на `Додати директорію`

<img style="display: block; margin: 0 auto" src="/assets/media/ru/guides/import-dir-add.png">
<p style="text-align: center; font-size:75%">Інтерфейс додавання директорії</p>

У полі `Шлях до директорії` необхідно вказати шлях до бажаної директорії з якої сервер спробує імпортувати контент

:::c-tip
Натиснув на <MaterialIcon icon="folder"/> можна відкрити зручне вікно вибору директорії
:::

### Налаштування імпорту

Перед додаванням директорії можна налаштувати деякі параметри імпорту:

:::c-danger
Налаштування [Імпортувати як сингли](./import.md#імпортувати-як-сингли) і [Імпортувати як Сингли тільки файли з кореневої директорії](./import.md#імпортувати-як-сингли-тільки-фаили-з-кореневоі-директоріі) можна не використовувати, якщо в [Метаданих](./metadata.md) файлів уже вказано статус `Сингл`
:::

#### Імпортувати як сингли

Активація цього параметра змусить сервер імпортувати кожен файл як `Сингл`, створюючи для них окрему `Серію`, ігноруючи будь-які інші умови імпорту (не формуючи автоматично `Серію` з піддиректорій і ігноруючи статус із [Метаданих](./metadata.md). Цей параметр може бути корисним, якщо ваш контент якось каталогізовано (наприклад, `Ваншоти` різних авторів розсортовані за директоріями), але ви не хочете, щоб сервер враховував цей момент і не створював некоректні `Серії`

#### Імпортувати як Сингли тільки файли з кореневої директорії

Активація цього параметра змусить сервер імпортувати кожен файл у корені вказаної директорії як `Сингл`, створюючи для них окрему `Серію`. Цей параметр може бути корисним, якщо ваш контент складається як із `Серій`, так і з `Синглів/Ваншотів` і ви хочете імпортувати їх, без формування некоректних `Серій`

## Процес імпортування

Натиснув <MaterialIcon icon="save"/> `Зберегти` у діалозі додавання директорії, запуститься процес імпортування на сервері. Даний процес досить швидкий (~20 архівів/сек в однопотоковому режимі і до 40 архівів/сек в багатопотоковому)

Під час імпорту сервер читає [Метадані](./metadata.md) з архівів, шукає і готує обкладинки, формує списки розділів і автоматично створює `Серії` з файлів у піддиректоріях

Сервер **не блокується**, поки виконується імпортування, тому ним можна користуватися як зазвичай

:::c-tip
Якщо у файлі є записані [Метадані](./metadata.md) і в них зазначено статус `Сингл`, сервер автоматично імпортує даних файл як `Сингл`, навіть якщо він розміщений в піддиректорії з іншими файлами
:::

## Кешування обкладинок (генерація прев'ю)

Після закінчення процесу імпортування автоматично запуститься сервіс кешування обкладинок (генерації прев'ю) для всіх імпортованих файлів, для яких обкладинка відсутня. Ця операція виконується істотно довше, оскільки з кожного архіву необхідно витягти обкладинку, декодувати її, зменшити в розмірах і зберегти на диск. Сервер у цей момент також **не блокується**

### Вибір обкладинки `Архіву`

Вибір обкладинки з архіву відбувається за деякими критеріями (з пріоритетом від верхнього до нижнього):
- зображення має назву `00000.<розширення>`
- зображення містить у назві слово `cover`
- зображення перше в списку з підтримуваним розширенням: `jpg`, `jpeg`, `png`, `bmp`, `webp`

### Вибір обкладинки `Серії`

За замовчуванням, обкладинкою `Серії` стає обкладинка першого `Архіву`

Також можна надати альтернативну обкладинку з назвою `cover.<розширення>`, де `<розширення>` можеть бути одним із: `jpg`, `jpeg`, `png`, `bmp`, `webp`. Обкладинку необхідно розташувати в директорії з іншими файлами, які будуть зібрані в `Серію`

:::c-tip
Якщо опцію [Дозволити завантаження списків з томами](/ua/installation/server-settings.md#allow-loading-list-with-volumes-true-false) увімкнено, то сервер замінюватиме обкладинку `Серії` на обкладинку першого непрочитаного `Архіву`

<img style="display: block; margin: 0 auto" src="/assets/media/ru/guides/import-cover-change.png">
<p style="text-align: center; font-size:75%">Автоматична зміна обкладинки</p>
:::

### Вибір обкладинки інших файлів

Для `PDF` і `Djvu` в якості обкладинки виступає перша сторінка книги  
Для `ePub` в якості обкладинки виступає обкладинка з `OPF` метаданих книги або перше зображення в архіві  
Для `FB2` в якості обкладинки виступає обкладинка з метаданих   


## Видалення директорії

Для видалення директорії необхідно натиснути <MaterialIcon icon="delete"/> біля директорії у вікні управління. Під час видалення весь пов'язаний контент буде видалено з бібліотеки. Історія читання залишається і відновиться автоматично після повторного імпортування